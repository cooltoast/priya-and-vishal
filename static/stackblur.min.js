!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.StackBlur=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a,b,c,d){if("string"==typeof a)var a=document.getElementById(a);else if(!a instanceof HTMLImageElement)return;var g=a.naturalWidth,h=a.naturalHeight;if("string"==typeof b)var b=document.getElementById(b);else if(!b instanceof HTMLCanvasElement)return;b.style.width=g+"px",b.style.height=h+"px",b.width=g,b.height=h;var i=b.getContext("2d");i.clearRect(0,0,g,h),i.drawImage(a,0,0),isNaN(c)||1>c||(d?e(b,0,0,g,h,c):f(b,0,0,g,h,c))}function e(a,b,c,d,e,f){if(!(isNaN(f)||1>f)){if(f|=0,"string"==typeof a)var a=document.getElementById(a);else if(!a instanceof HTMLCanvasElement)return;var j,k=a.getContext("2d");try{try{j=k.getImageData(b,c,d,e)}catch(l){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),j=k.getImageData(b,c,d,e)}catch(l){throw alert("Cannot access local image"),new Error("unable to access local image data: "+l)}}}catch(l){throw alert("Cannot access image"),new Error("unable to access image data: "+l)}var m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=j.data,L=f+f+1,M=d-1,N=e-1,O=f+1,P=O*(O+1)/2,Q=new g,R=Q;for(o=1;L>o;o++)if(R=R.next=new g,o==O)var S=R;R.next=Q;var T=null,U=null;s=r=0;var V=h[f],W=i[f];for(n=0;e>n;n++){for(B=C=D=E=t=u=v=w=0,x=O*(F=K[r]),y=O*(G=K[r+1]),z=O*(H=K[r+2]),A=O*(I=K[r+3]),t+=P*F,u+=P*G,v+=P*H,w+=P*I,R=Q,o=0;O>o;o++)R.r=F,R.g=G,R.b=H,R.a=I,R=R.next;for(o=1;O>o;o++)p=r+((o>M?M:o)<<2),t+=(R.r=F=K[p])*(J=O-o),u+=(R.g=G=K[p+1])*J,v+=(R.b=H=K[p+2])*J,w+=(R.a=I=K[p+3])*J,B+=F,C+=G,D+=H,E+=I,R=R.next;for(T=Q,U=S,m=0;d>m;m++)K[r+3]=I=w*V>>W,0!=I?(I=255/I,K[r]=(t*V>>W)*I,K[r+1]=(u*V>>W)*I,K[r+2]=(v*V>>W)*I):K[r]=K[r+1]=K[r+2]=0,t-=x,u-=y,v-=z,w-=A,x-=T.r,y-=T.g,z-=T.b,A-=T.a,p=s+((p=m+f+1)<M?p:M)<<2,B+=T.r=K[p],C+=T.g=K[p+1],D+=T.b=K[p+2],E+=T.a=K[p+3],t+=B,u+=C,v+=D,w+=E,T=T.next,x+=F=U.r,y+=G=U.g,z+=H=U.b,A+=I=U.a,B-=F,C-=G,D-=H,E-=I,U=U.next,r+=4;s+=d}for(m=0;d>m;m++){for(C=D=E=B=u=v=w=t=0,r=m<<2,x=O*(F=K[r]),y=O*(G=K[r+1]),z=O*(H=K[r+2]),A=O*(I=K[r+3]),t+=P*F,u+=P*G,v+=P*H,w+=P*I,R=Q,o=0;O>o;o++)R.r=F,R.g=G,R.b=H,R.a=I,R=R.next;for(q=d,o=1;f>=o;o++)r=q+m<<2,t+=(R.r=F=K[r])*(J=O-o),u+=(R.g=G=K[r+1])*J,v+=(R.b=H=K[r+2])*J,w+=(R.a=I=K[r+3])*J,B+=F,C+=G,D+=H,E+=I,R=R.next,N>o&&(q+=d);for(r=m,T=Q,U=S,n=0;e>n;n++)p=r<<2,K[p+3]=I=w*V>>W,I>0?(I=255/I,K[p]=(t*V>>W)*I,K[p+1]=(u*V>>W)*I,K[p+2]=(v*V>>W)*I):K[p]=K[p+1]=K[p+2]=0,t-=x,u-=y,v-=z,w-=A,x-=T.r,y-=T.g,z-=T.b,A-=T.a,p=m+((p=n+O)<N?p:N)*d<<2,t+=B+=T.r=K[p],u+=C+=T.g=K[p+1],v+=D+=T.b=K[p+2],w+=E+=T.a=K[p+3],T=T.next,x+=F=U.r,y+=G=U.g,z+=H=U.b,A+=I=U.a,B-=F,C-=G,D-=H,E-=I,U=U.next,r+=d}k.putImageData(j,b,c)}}function f(a,b,c,d,e,f){if(!(isNaN(f)||1>f)){if(f|=0,"string"==typeof a)var a=document.getElementById(a);else if(!a instanceof HTMLCanvasElement)return;var j,k=a.getContext("2d");try{try{j=k.getImageData(b,c,d,e)}catch(l){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),j=k.getImageData(b,c,d,e)}catch(l){throw alert("Cannot access local image"),new Error("unable to access local image data: "+l)}}}catch(l){throw alert("Cannot access image"),new Error("unable to access image data: "+l)}var m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=j.data,H=f+f+1,I=d-1,J=e-1,K=f+1,L=K*(K+1)/2,M=new g,N=M;for(o=1;H>o;o++)if(N=N.next=new g,o==K)var O=N;N.next=M;var P=null,Q=null;s=r=0;var R=h[f],S=i[f];for(n=0;e>n;n++){for(z=A=B=t=u=v=0,w=K*(C=G[r]),x=K*(D=G[r+1]),y=K*(E=G[r+2]),t+=L*C,u+=L*D,v+=L*E,N=M,o=0;K>o;o++)N.r=C,N.g=D,N.b=E,N=N.next;for(o=1;K>o;o++)p=r+((o>I?I:o)<<2),t+=(N.r=C=G[p])*(F=K-o),u+=(N.g=D=G[p+1])*F,v+=(N.b=E=G[p+2])*F,z+=C,A+=D,B+=E,N=N.next;for(P=M,Q=O,m=0;d>m;m++)G[r]=t*R>>S,G[r+1]=u*R>>S,G[r+2]=v*R>>S,t-=w,u-=x,v-=y,w-=P.r,x-=P.g,y-=P.b,p=s+((p=m+f+1)<I?p:I)<<2,z+=P.r=G[p],A+=P.g=G[p+1],B+=P.b=G[p+2],t+=z,u+=A,v+=B,P=P.next,w+=C=Q.r,x+=D=Q.g,y+=E=Q.b,z-=C,A-=D,B-=E,Q=Q.next,r+=4;s+=d}for(m=0;d>m;m++){for(A=B=z=u=v=t=0,r=m<<2,w=K*(C=G[r]),x=K*(D=G[r+1]),y=K*(E=G[r+2]),t+=L*C,u+=L*D,v+=L*E,N=M,o=0;K>o;o++)N.r=C,N.g=D,N.b=E,N=N.next;for(q=d,o=1;f>=o;o++)r=q+m<<2,t+=(N.r=C=G[r])*(F=K-o),u+=(N.g=D=G[r+1])*F,v+=(N.b=E=G[r+2])*F,z+=C,A+=D,B+=E,N=N.next,J>o&&(q+=d);for(r=m,P=M,Q=O,n=0;e>n;n++)p=r<<2,G[p]=t*R>>S,G[p+1]=u*R>>S,G[p+2]=v*R>>S,t-=w,u-=x,v-=y,w-=P.r,x-=P.g,y-=P.b,p=m+((p=n+K)<J?p:J)*d<<2,t+=z+=P.r=G[p],u+=A+=P.g=G[p+1],v+=B+=P.b=G[p+2],P=P.next,w+=C=Q.r,x+=D=Q.g,y+=E=Q.b,z-=C,A-=D,B-=E,Q=Q.next,r+=d}k.putImageData(j,b,c)}}function g(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var h=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],i=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];b.exports={image:d,canvasRGBA:e,canvasRGB:f}},{}]},{},[1])(1)});